To move from your successful Empire Stack build into the "Friendly 4" pilot and future grant reporting, we need to lock in the Audit Trail and Identity Bridge logic. These instructions will ensure Replit remains stateless and compliant with your architecture while preparing the system for real users.

Instructions for the Replit Agent
Copy and paste the text below into the Replit Agent chat:

"We are entering the Final Pilot Stabilization phase for The Indie Quill Collective. We must strictly adhere to the Indie Quill Architecture: No local storage on Replit, and all data must be vaulted in Supabase via the SUPABASE_DEV_URL.

Task 1: Finalize the 'Stateless' Session Store

Configure connect-pg-simple to point to the user_sessions table in Supabase.

Ensure the session handshake uses the SUPABASE_DEV_URL (Port 5432 Session Pooler).

Verify that restarting the Replit container does not log out the user.

Task 2: Implement the 'Forensic' Audit Trail

Update the Contract Management module to capture the signer's IP Address and User-Agent string during the digital signature step.

Store this forensic metadata in the contracts table in Supabase alongside the Base64-encoded PDF.

Ensure no temporary PDF files are saved to the Replit /temp or /contracts folders.

Task 3: Refine the Identity Bridge for Pilot Testing

Verify that the npo-sync-service.ts correctly maps the Collective UUID to the Bookstore authorId using only the remote database.

Ensure that when one of our 4 'Friendly' testers completes a manuscript, the Live Impact Widget (Words Processed) and Flywheel Visualization update immediately via a database trigger or API hook.

Task 4: The 'Indie Quill' Kill Switch

Search the codebase for any remaining references to DATABASE_URL and replace them with SUPABASE_DEV_URL.

Once verified, Delete the DATABASE_URL secret from the Replit environment to prove we are 'Zero Data' on the IDE.

If the app fails to start, report the connection error instead of creating a local SQLite or Postgres instance."